import{r as t,p as Z,i as ae,o as a,c as l,a as n,F as O,j as F,n as B,t as p,q as ee,e as Y,b as h,_ as se,s as be,v as ke,x as _e,h as we,f as S,w as te,l as xe,k as Se,g as Ce,y as qe}from"./qZLNyBYL.js";import{_ as ze}from"./C_gB311Z.js";const Me={class:"row"},Be={class:"col-12",style:{"margin-bottom":"2em"}},Ne={class:"col-12",style:{"margin-bottom":"0"}},$e={key:0},Ae={key:1},Ke={__name:"Question",props:{currentSyllable:{type:Number,default:0},syllables:{type:Array,default(){return[]}},questionAnswered:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!0}},setup(i){const v=i,C=t(10),y=t(768),b=t(5),f=t(null),c=t(null),N=()=>screen.width<=y.value,k=()=>{if(v.questionAnswered)for(let e=0;e<v.syllables.length;e++)f.value[e].style.transition="all .4s ease-out",c.value[e].style.width=c.value[e].firstChild.offsetWidth+1+"px",c.value[e].style.transition="all .4s ease-out",f.value[e].style.width=f.value[e].firstChild.offsetWidth+1+"px";if(!v.questionAnswered)for(let e=0;e<v.syllables.length;e++)c.value[e].style.transition="none",c.value[e].style.width=c.value[e].firstChild.offsetWidth+1+C.value+"px",f.value[e].style.transition="none",f.value[e].style.width=c.value[e].offsetWidth+1+"px"};return Z(()=>v.questionAnswered,()=>{ee(()=>{k()})}),Z(()=>v.isLoading,e=>{e||ee(()=>{k()})}),ae(()=>{N()&&(C.value=b.value)}),(e,q)=>(a(),l("div",null,[n("div",Me,[n("div",Be,[(a(!0),l(O,null,F(i.syllables,(_,u)=>(a(),l("div",{key:u,ref_for:!0,ref_key:"aksaraSyllables",ref:c,class:B(["aksara-syllable",{current:u===i.currentSyllable,answered:u<i.currentSyllable}]),style:{display:"inline-block"}},[n("span",null,p(e.latinToJava(_)),1)],2))),128))]),n("div",Ne,[(a(!0),l(O,null,F(i.syllables,(_,u)=>(a(),l("div",{key:u,ref_for:!0,ref_key:"latinSyllables",ref:f,class:B(["latin-syllable",{current:u===i.currentSyllable,answered:u<i.currentSyllable}]),style:{display:"inline-block"}},[i.questionAnswered||u<i.currentSyllable?(a(),l("span",$e,p(_),1)):(a(),l("span",Ae,"..."))],2))),128))])])]))}},Te=["onClick"],Le={__name:"MultipleChoices",props:{choices:{type:Array,default(){return["ha","na","ca","ra"]}}},setup(i){return(v,C)=>(a(),l("div",null,[(a(!0),l(O,null,F(i.choices,(y,b)=>(a(),l("button",{ref_for:!0,ref:"choices",key:b,class:"button white mx-2",style:{"font-weight":"900"},onClick:f=>v.$emit("select-choices",v.$refs.choices[b],y)},p(y),9,Te))),128))]))}},Pe={__name:"Notification",props:{visible:{type:Boolean,default:!1},icon:{type:String,default:""},variant:{type:String,default:"primary"},message:{type:String,default:"Notification Message"}},setup(i){return(v,C)=>{const y=se;return a(),l("div",{class:B(["notification",[{visible:i.visible,invisible:!i.visible},i.variant]])},[i.icon!==""?(a(),Y(y,{key:0,icon:i.icon,style:{"margin-right":".5em"}},null,8,["icon"])):h("",!0),n("b",null,p(i.message),1)],2)}}},Qe={class:"quiz-wrapper"},je={class:"container is-full-screen",style:{position:"relative",display:"flex","flex-direction":"column"}},We={class:"quiz-top-area-wrapper row is-center",style:{padding:"1.5em"}},Je={class:"col-2-important"},Ye=["onClick"],De={class:"col-8-important"},He={class:"col-2-important"},Ve={class:"col-12 text-center"},Ie={key:0,class:"quiz-instruction px-3 px-md-0"},Re={key:1,class:"quiz-instruction"},Oe={key:0,class:"col-12 text-center",style:{"margin-top":"2em"}},Fe={key:0},Ee={key:1,class:"row is-center",style:{"flex-grow":"1","flex-direction":"column","flex-wrap":"wrap"}},Ue={class:"col-12 text-center"},Ge={class:"col-12 text-center",style:{"margin-bottom":"2em"}},Xe={class:"thumbs-up-icon"},Ze={key:0,class:"col-12 text-center"},et={key:1},tt={class:"col-12 text-center"},lt={__name:"[id]",setup(i){const{$shuffleArray:v,$toSyllables:C,$generateJavaneseSyllable:y}=be(),b=Se(),f=ke(),c=_e(),N=t(!0),k=t(!1),e=t(void 0),q=t(""),_=t(""),u=t(void 0),T=t(0),D=t(0),g=t({}),$=t(0),z=t([]),w=t(0),H=t([]),le=t(4),E=t(0),m=t(!1),x=t(0),A=t(0),V=t(!1),L=t(!1),d=t({visible:!1,timeout:{},selected:{}}),K=t(!0),P=t(null),U=t(""),Q={correct:{icon:"check",variant:"success",message:"Benar"},wrong:{icon:"sad-tear",variant:"danger",message:"Salah"},streak:{icon:"fire",variant:"success",message:"Jawaban Benar! 0x Streak!"},losestreak:{icon:"sad-tear",variant:"danger",message:"Salah! Kehilangan Streak!"}},ne=["Mantap Betul!","Kerja Bagus!","Mainnya Hebat!","Mantul Dah!"],ie=["Kurang Tepat Nih, Kamu Pasti Bisa Kok!","Kurang Tepat Nih, Jangan Patah Semangat!","Kurang Tepat Nih, Yuk Bisa Yuk!"],oe=["Streaknya Hilang. Coba Lagi Yuk!","Streaknya Hilang. Pantang Mundur Yuk!","Streaknya Hilang. Yuk Bisa Yuk!"],ue=["Selamat, kamu berhasil menyelesaikan kuis!","Kuisnya berhasil diselesaikan kuis dengan apik!","Kuisnya berhasil diselesaikan, hore!"],j=_.value!==void 0?"Kuis "+_.value:"Kuis Tidak Ditemukan",I="https://adityarahmanda.github.io/macaksara/"+f.params.id;we({title:`${j} â€” Macaksara`,meta:[{name:"robots",content:"noindex, follow"},{hid:"title",name:"title",content:j},{property:"og:title",content:j},{property:"og:url",content:I},{name:"twitter:title",content:j},{name:"twitter:url",content:I}],link:[{rel:"canonical",href:I}]}),ae(async()=>{q.value=f.params.id;try{const r=await(await fetch(b.public.router_base+"quizzes.json")).json();u.value=r.find(o=>o.slug===q.value),re(),ce()}catch(s){console.log(s),c.push("/")}finally{N.value=!1}});const re=()=>{if(e.value=JSON.parse(localStorage.getItem("userData")),!e.value){c.push("/");return}if(e.value.learnedWords===void 0||e.value.learnedWords===null){c.push("/");return}(e.value.maxStreak===void 0||e.value.maxStreak===null)&&c.push("/")},ce=()=>{if(_.value=u.value.title,T.value=e.value.quizProgresses[q.value].currentLevel,D.value=u.value.levels.length,T.value>D.value){c.push("/");return}const s=Object.keys(u.value.levels);for(const r in s)if(u.value.levels[r].value===T.value){g.value=u.value.levels[r].questions;break}v(g.value),X()},G=s=>{let r=[s];for(let o=1;o<le.value;o++){let M;do M=y();while(M===s);r=[...r,M]}return v(r)},ve=(s,r)=>{if(!m.value){if(r===z.value[w.value]){R("correct.mp3"),x.value++,x.value>A.value&&(A.value=x.value);const o=J(ne);x.value>=2?(W(Q.streak),d.value.selected.message=o+" "+x.value+"x Streak"):(W(Q.correct),d.value.selected.message=o),w.value<z.value.length-1?(w.value++,H.value=G(z.value[w.value])):(m.value=!0,E.value=($.value+1)/g.value.length*100),s.blur();return}if(R("wrong.mp3"),x.value!==0){x.value=0,W(Q.losestreak);const o=J(oe);d.value.selected.message=o}else{W(Q.wrong);const o=J(ie);d.value.selected.message=o}}},de=()=>{if(m.value)if($.value<g.value.length-1)$.value++,w.value=0,X();else{R("tada.mp3"),U.value=J(ue);const s=e.value.quizProgresses[q.value];s.isCompleted||(T.value===D.value?s.isCompleted=!0:s.currentLevel++,e.value.quizProgresses[q.value]=s,e.value.learnedWords+=g.value.length,V.value=!0),A.value>e.value.maxStreak&&(e.value.maxStreak=A.value,L.value=!0),localStorage.setItem("userData",JSON.stringify(e.value)),k.value=!0}},X=()=>{m.value=!1,z.value=C(g.value[$.value].value),H.value=G(z.value[w.value])},W=s=>{d.value.selected=s,d.value.visible=!0,clearTimeout(d.value.timeout),d.value.timeout=setTimeout(()=>{d.value.visible=!1},1500)},me=()=>{K.value=!K.value,localStorage.setItem("enableAudio",K.value)},R=s=>{K.value&&(P.value=null,P.value=new Audio(b.public.router_base+"sounds/"+s),P.value.currentTime=0,P.value.play())},J=s=>{const r=Math.floor(Math.random()*s.length);return s[r]};return(s,r)=>{const o=se,M=Ce,fe=ze,he=Ke,ye=Le,ge=Pe;return a(),l("div",Qe,[n("div",je,[n("div",We,[n("div",Je,[S(M,{to:"/",custom:""},{default:te(({navigate:pe})=>[n("div",{class:"text-left",style:{"font-size":"2em",cursor:"pointer"},onClick:pe},[S(o,{icon:"times"})],8,Ye)]),_:1})]),n("div",De,[S(fe,{percentage:E.value},null,8,["percentage"])]),n("div",He,[n("div",{class:"text-right",style:{"font-size":"2em",cursor:"pointer"},onClick:me},[K.value?(a(),Y(o,{key:0,icon:"volume-up"})):(a(),Y(o,{key:1,icon:"volume-mute"}))])])]),k.value?h("",!0):(a(),l("div",{key:0,class:B(["row is-center",N.value?"invisible":"visible"]),style:{"flex-grow":"1","flex-direction":"column","flex-wrap":"wrap"}},[n("div",Ve,[m.value?(a(),l("h4",Ie,"Satu Kata Berhasil Dibaca!")):(a(),l("h4",Re,"Pilih Cara Baca Yang Benar"))]),S(he,{"question-answered":m.value,"current-syllable":w.value,syllables:z.value,"is-loading":N.value,class:"col-12 text-center",style:{"margin-bottom":"0"}},null,8,["question-answered","current-syllable","syllables","is-loading"]),m.value?h("",!0):(a(),l("div",Oe,[S(ye,{choices:H.value,onSelectChoices:ve},null,8,["choices"])])),n("div",{class:B(["quiz-translation col-12 text-center",m.value?"visible":"invisible"])},[m.value?(a(),l("span",Fe,"terjemahan: "+p(g.value[$.value].translation),1)):h("",!0)],2),n("div",{class:B(["quiz-next-button-area col-12 text-center",m.value?"visible":"invisible"]),style:{"margin-top":"1em"}},[m.value?(a(),l("button",{key:0,class:"button primary",style:{"font-weight":"900","border-radius":"50rem","padding-left":"4em","padding-right":"4em"},onClick:de},"Lanjut")):h("",!0)],2)],2)),k.value?(a(),l("div",Ee,[n("div",Ue,[n("h3",null,p(U.value),1)]),n("div",Ge,[n("div",Xe,[S(o,{icon:"thumbs-up"})])]),V.value||L.value?(a(),l("div",Ze,[V.value?(a(),l("h5",{key:0,style:xe(L.value?"margin-bottom: 0em":"")},p(g.value.length)+" kata baru berhasil dibaca!",5)):h("",!0),L.value?(a(),l("h5",et,p(A.value)+" streak baru didapatkan!",1)):h("",!0)])):h("",!0),n("div",tt,[S(M,{to:"/",class:"button primary",style:{"font-weight":"900","border-radius":"50rem","padding-left":"4em","padding-right":"4em"}},{default:te(()=>r[0]||(r[0]=[qe(" Kembali ke Beranda ")])),_:1})])])):h("",!0),k.value?h("",!0):(a(),Y(ge,{key:2,visible:d.value.visible,icon:d.value.selected.icon,variant:d.value.selected.variant,message:d.value.selected.message},null,8,["visible","icon","variant","message"]))])])}}};export{lt as default};
