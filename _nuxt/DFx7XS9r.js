import{m as ne,r as a,p as te,i as ie,o as t,c as l,a as i,b as h,F as E,j as U,n as z,t as w,u as we,q as se,e as I,_ as oe,s as xe,v as Se,h as Ce,f as M,w as le,x as qe,k as Le,g as Me,y as ze}from"./DkvaAolM.js";import{_ as Be}from"./DB4F65No.js";const Ne={class:"row"},Ae={class:"col-12",style:{"margin-bottom":"2em"}},$e={class:"col-12",style:{"margin-bottom":"0"}},Ke={key:0},Pe={key:1},De={__name:"Question",props:{currentSyllable:{type:Number,default:0},syllables:{type:Array,default(){return[]}},questionAnswered:{type:Boolean,default:!1},isLearningAngka:{type:Boolean,default:!1},isMurda:{type:Boolean,default:!1},isDipthong:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!0}},setup(n){const{$convert:x}=ne(),p=n,k=a(10),S=a(768),A=a(5),v=a(null),d=a(null),m=a(null),o=a(null),C=()=>screen.width<=S.value,B=()=>{if(p.questionAnswered){v.value&&(v.value.style.transition="all .4s ease-out",v.value.style.width=v.value.firstChild.offsetWidth+1+"px"),d.value&&(d.value.style.transition="all .4s ease-out",d.value.style.width=d.value.firstChild.offsetWidth+1+"px");for(let s=0;s<p.syllables.length;s++)o.value[s].style.transition="all .4s ease-out",o.value[s].style.width=o.value[s].firstChild.offsetWidth+1+"px",m.value[s].style.transition="all .4s ease-out",m.value[s].style.width=m.value[s].firstChild.offsetWidth+1+"px"}if(!p.questionAnswered){v.value&&(v.value.style.transition="none",v.value.style.width=v.value.firstChild.offsetWidth+1+"px"),d.value&&(d.value.style.transition="none",d.value.style.width=d.value.firstChild.offsetWidth+1+"px");for(let s=0;s<p.syllables.length;s++)o.value[s].style.transition="none",o.value[s].style.width=o.value[s].firstChild.offsetWidth+1+k.value+"px",m.value[s].style.transition="none",m.value[s].style.width=o.value[s].offsetWidth+1+"px"}};return te(()=>p.questionAnswered,()=>{se(()=>{B()})}),te(()=>p.isLoading,s=>{s||se(()=>{B()})}),ie(()=>{C()&&(k.value=A.value)}),(s,b)=>(t(),l("div",null,[i("div",Ne,[i("div",Ae,[n.isLearningAngka?(t(),l("div",{key:0,ref_key:"angkaPrefix",ref:v,class:"aksara-syllable answered",style:{display:"inline-block"}},b[0]||(b[0]=[i("span",null,"꧇",-1)]),512)):h("",!0),(t(!0),l(E,null,U(n.syllables,(q,u)=>(t(),l("div",{key:u,ref_for:!0,ref_key:"aksaraSyllables",ref:o,class:z(["aksara-syllable",{current:u===n.currentSyllable,answered:u<n.currentSyllable}]),style:{display:"inline-block"}},[i("span",null,w(we(x)(q,!0,n.isMurda,n.isDipthong)),1)],2))),128)),n.isLearningAngka?(t(),l("div",{key:1,ref_key:"angkaPostfix",ref:d,class:"aksara-syllable answered",style:{display:"inline-block"}},b[1]||(b[1]=[i("span",null,"꧇",-1)]),512)):h("",!0)]),i("div",$e,[(t(!0),l(E,null,U(n.syllables,(q,u)=>(t(),l("div",{key:u,ref_for:!0,ref_key:"latinSyllables",ref:m,class:z(["latin-syllable",{current:u===n.currentSyllable,answered:u<n.currentSyllable}]),style:{display:"inline-block"}},[n.questionAnswered||u<n.currentSyllable?(t(),l("span",Ke,w(q),1)):(t(),l("span",Pe,"..."))],2))),128))])])]))}},We=["onClick"],Te={__name:"MultipleChoices",props:{choices:{type:Array,default(){return["ha","na","ca","ra"]}}},setup(n){return(x,p)=>(t(),l("div",null,[(t(!0),l(E,null,U(n.choices,(k,S)=>(t(),l("button",{ref_for:!0,ref:"choices",key:S,class:"button white mx-2",style:{"font-weight":"900"},onClick:A=>x.$emit("select-choices",x.$refs.choices[S],k)},w(k),9,We))),128))]))}},je={__name:"Notification",props:{visible:{type:Boolean,default:!1},icon:{type:String,default:""},variant:{type:String,default:"primary"},message:{type:String,default:"Notification Message"}},setup(n){return(x,p)=>{const k=oe;return t(),l("div",{class:z(["notification",[{visible:n.visible,invisible:!n.visible},n.variant]])},[n.icon!==""?(t(),I(k,{key:0,icon:n.icon,style:{"margin-right":".5em"}},null,8,["icon"])):h("",!0),i("b",null,w(n.message),1)],2)}}},Qe={class:"quiz-wrapper"},Ye={class:"container is-full-screen",style:{position:"relative",display:"flex","flex-direction":"column"}},He={class:"quiz-top-area-wrapper row is-center",style:{padding:"1.5em"}},Je={class:"col-2-important"},Ve=["onClick"],Ie={class:"col-8-important"},Oe={class:"col-2-important"},Re={class:"col-12 text-center"},Fe={key:0,class:"quiz-instruction px-3 px-md-0"},Ee={key:1,class:"quiz-instruction"},Ue={key:0,class:"col-12 text-center",style:{"margin-top":"2em"}},Ge={key:0},Xe={key:0},Ze={key:1,class:"row is-center",style:{"flex-grow":"1","flex-direction":"column","flex-wrap":"wrap"}},ea={class:"col-12 text-center"},aa={class:"col-12 text-center",style:{"margin-bottom":"2em"}},ta={class:"thumbs-up-icon"},sa={key:0,class:"col-12 text-center"},la={key:1},na={class:"col-12 text-center"},ua={__name:"[id]",setup(n){const{$shuffleArray:x,$toSyllables:p,$generateJavaneseSyllable:k}=ne(),S=Le(),A=xe(),v=Se(),d=a(!0),m=a(!1),o=a(void 0),C=a(""),B=a(""),s=a(void 0),b=a(0),q=a(0),u=a({}),_=a(0),$=a([]),N=a(0),G=a([]),ue=a(4),K=a({}),X=a(0),g=a(!1),L=a(0),P=a(0),O=a(!1),T=a(!1),f=a({visible:!1,timeout:{},selected:{}}),D=a(!0),j=a(null),Z=a(""),Q={correct:{icon:"check",variant:"success",message:"Benar"},wrong:{icon:"sad-tear",variant:"danger",message:"Salah"},streak:{icon:"fire",variant:"success",message:"Jawaban Benar! 0x Streak!"},losestreak:{icon:"sad-tear",variant:"danger",message:"Salah! Kehilangan Streak!"}},re=["Mantap Betul!","Kerja Bagus!","Mainnya Hebat!","Mantul Dah!"],ce=["Kurang Tepat Nih, Kamu Pasti Bisa Kok!","Kurang Tepat Nih, Jangan Patah Semangat!","Kurang Tepat Nih, Yuk Bisa Yuk!"],ve=["Streaknya Hilang. Coba Lagi Yuk!","Streaknya Hilang. Pantang Mundur Yuk!","Streaknya Hilang. Yuk Bisa Yuk!"],de=["Selamat, kamu berhasil menyelesaikan kuis!","Kuisnya berhasil diselesaikan dengan apik!","Kuisnya berhasil diselesaikan, hore!"],Y=B.value!==void 0?"Kuis "+B.value:"Kuis Tidak Ditemukan",R="https://adityarahmanda.github.io/macaksara/"+A.params.id;Ce({title:`${Y} — Macaksara`,meta:[{name:"robots",content:"noindex, follow"},{hid:"title",name:"title",content:Y},{property:"og:title",content:Y},{property:"og:url",content:R},{name:"twitter:title",content:Y},{name:"twitter:url",content:R}],link:[{rel:"canonical",href:R}]}),ie(async()=>{C.value=A.params.id;try{const c=await(await fetch(S.public.router_base+"quiz-database.json")).json();for(let r=0;r<c.length;r++){const y=c[r];for(let W=0;W<y.quizzes.length;W++){const V=y.quizzes[W];if(V.slug==C.value){s.value=V;break}}}ge(),fe()}catch(e){console.log(e),v.push("/")}finally{d.value=!1}});const ge=()=>{if(o.value=JSON.parse(localStorage.getItem("userData")),!o.value){v.push("/");return}if(o.value.learnedWords===void 0||o.value.learnedWords===null){v.push("/");return}(o.value.maxStreak===void 0||o.value.maxStreak===null)&&v.push("/")},fe=()=>{if(B.value=s.value.title,b.value=o.value.quizProgresses[C.value].currentLevel,q.value=s.value.levels.length,b.value>q.value){v.push("/");return}const e=Object.keys(s.value.levels);for(const c in e)if(s.value.levels[c].value===b.value){u.value=s.value.levels[c].questions;break}x(u.value),ee()},he=e=>{let c=[e];for(let r=1;r<ue.value;r++){let y;do y=k(K.value);while(c.includes(y)||e==="ha"&&y==="a"||e==="a"&&y==="ha");c=[...c,y]}return x(c)},me=(e,c)=>{if(!g.value){if(c===$.value[N.value]){F("correct.mp3"),L.value++,L.value>P.value&&(P.value=L.value);const r=J(re);L.value>=2?(H(Q.streak),f.value.selected.message=r+" "+L.value+"x Streak"):(H(Q.correct),f.value.selected.message=r),N.value<$.value.length-1?(N.value++,ae()):(g.value=!0,X.value=(_.value+1)/u.value.length*100),e.blur();return}if(F("wrong.mp3"),L.value!==0){L.value=0,H(Q.losestreak);const r=J(ve);f.value.selected.message=r}else{H(Q.wrong);const r=J(ce);f.value.selected.message=r}}},ye=()=>{if(g.value)if(_.value<u.value.length-1)_.value++,N.value=0,ee();else{F("tada.mp3"),Z.value=J(de);const e=o.value.quizProgresses[C.value];e.isCompleted||(b.value===q.value?e.isCompleted=!0:e.currentLevel++,o.value.quizProgresses[C.value]=e,o.value.learnedWords+=u.value.length,O.value=!0),P.value>o.value.maxStreak&&(o.value.maxStreak=P.value,T.value=!0),localStorage.setItem("userData",JSON.stringify(o.value)),m.value=!0}},ee=()=>{g.value=!1;const e=u.value[_.value];$.value=p(e.value),ae()},ae=()=>{const e=u.value[_.value];K.value={isLearningNglegena:e.isLearningNglegena,isLearningSwara:e.isLearningSwara,isLearningSandhangan:e.isLearningSandhangan,isLearningMurda:e.isLearningMurda,isLearningAngka:e.isLearningAngka,isLearningLampau:e.isLearningLampau,isMurda:e.isMurda,isDipthong:e.isDipthong},G.value=he($.value[N.value])},H=e=>{f.value.selected=e,f.value.visible=!0,clearTimeout(f.value.timeout),f.value.timeout=setTimeout(()=>{f.value.visible=!1},1500)},pe=()=>{D.value=!D.value,localStorage.setItem("enableAudio",D.value)},F=e=>{D.value&&(j.value=null,j.value=new Audio(S.public.router_base+"sounds/"+e),j.value.currentTime=0,j.value.play())},J=e=>{const c=Math.floor(Math.random()*e.length);return e[c]};return(e,c)=>{const r=oe,y=Me,W=Be,V=De,ke=Te,be=je;return t(),l("div",Qe,[i("div",Ye,[i("div",He,[i("div",Je,[M(y,{to:"/",custom:""},{default:le(({navigate:_e})=>[i("div",{class:"text-left",style:{"font-size":"2em",cursor:"pointer"},onClick:_e},[M(r,{icon:"times"})],8,Ve)]),_:1})]),i("div",Ie,[M(W,{percentage:X.value},null,8,["percentage"])]),i("div",Oe,[i("div",{class:"text-right",style:{"font-size":"2em",cursor:"pointer"},onClick:pe},[D.value?(t(),I(r,{key:0,icon:"volume-up"})):(t(),I(r,{key:1,icon:"volume-mute"}))])])]),m.value?h("",!0):(t(),l("div",{key:0,class:z(["row is-center",d.value?"invisible":"visible"]),style:{"flex-grow":"1","flex-direction":"column","flex-wrap":"wrap"}},[i("div",Re,[g.value?(t(),l("h4",Fe,"Satu Kata Berhasil Dibaca!")):(t(),l("h4",Ee,"Pilih Cara Baca Yang Benar"))]),M(V,{"question-answered":g.value,"current-syllable":N.value,syllables:$.value,"is-loading":d.value,"is-murda":K.value.isMurda,"is-dipthong":K.value.isDipthong,"is-learning-angka":K.value.isLearningAngka,class:"col-12 text-center",style:{"margin-bottom":"0"}},null,8,["question-answered","current-syllable","syllables","is-loading","is-murda","is-dipthong","is-learning-angka"]),g.value?h("",!0):(t(),l("div",Ue,[M(ke,{choices:G.value,onSelectChoices:me},null,8,["choices"])])),i("div",{class:z(["quiz-translation col-12 text-center",g.value?"visible":"invisible"])},[g.value&&u.value[_.value].translation?(t(),l("span",Ge,"terjemahan: "+w(u.value[_.value].translation),1)):h("",!0)],2),i("div",{class:z(["quiz-translation col-12 text-center",g.value?"visible":"invisible"])},[g.value&&u.value[_.value].description?(t(),l("span",Xe,"keterangan: "+w(u.value[_.value].description),1)):h("",!0)],2),i("div",{class:z(["quiz-next-button-area col-12 text-center",g.value?"visible":"invisible"]),style:{"margin-top":"1em"}},[g.value?(t(),l("button",{key:0,class:"button primary",style:{"font-weight":"900","border-radius":"50rem","padding-left":"4em","padding-right":"4em"},onClick:ye},"Lanjut")):h("",!0)],2)],2)),m.value?(t(),l("div",Ze,[i("div",ea,[i("h3",null,w(Z.value),1)]),i("div",aa,[i("div",ta,[M(r,{icon:"thumbs-up"})])]),O.value||T.value?(t(),l("div",sa,[O.value?(t(),l("h5",{key:0,style:qe(T.value?"margin-bottom: 0em":"")},w(u.value.length)+" kata baru berhasil dibaca!",5)):h("",!0),T.value?(t(),l("h5",la,w(P.value)+" streak baru didapatkan!",1)):h("",!0)])):h("",!0),i("div",na,[M(y,{to:"/",class:"button primary",style:{"font-weight":"900","border-radius":"50rem","padding-left":"4em","padding-right":"4em"}},{default:le(()=>c[0]||(c[0]=[ze(" Kembali ke Beranda ")])),_:1})])])):h("",!0),m.value?h("",!0):(t(),I(be,{key:2,visible:f.value.visible,icon:f.value.selected.icon,variant:f.value.selected.variant,message:f.value.selected.message},null,8,["visible","icon","variant","message"]))])])}}};export{ua as default};
